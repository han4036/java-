<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.dongazul.myapp.mapper.MemberMapper">
	<!--회원가입 -->
    <insert 
    	parameterType="com.dongazul.myapp.domain.MemberVO"
    	id="insert">
       INSERT INTO MEMBER (email, passwd, phonenumber)
       VALUES ( #{email}, #{passwd}, #{phonenumber} )
    </insert>
    
    <!--로그인-->
    <select id="select"
           resultType="com.dongazul.myapp.domain.MemberVO">
           SELECT email, passwd, phonenumber
           FROM member
           WHERE email = #{email}
           AND  passwd = #{passwd}
     </select>
         
    <!-- 회원정보수정 -->
    <update id="memberUpdate">
    	UPDATE member 
    	SET
    	passwd = #{passwd},
    	phonenumber = #{phonenumber}
    	WHERE email = #{email}
    </update>
         
      <!-- 이메일 중복체크 -->   
     <select id="emailCheck" resultType="int">
     	SELECT count(*) FROM member
     	WHERE email = #{email}
     </select>
     
       <!-- 회원 탈퇴 -->
	 <delete id="memberDelete">
		DELETE FROM member
		WHERE email = #{email}
		  AND passwd = #{passwd} 
	</delete>
	
	<!-- 이메일 찾기 -->
    <select id="findId" resultType="String">
     	SELECT email
     	FROM member
     	WHERE phonenumber = #{phonenumber}
    </select>
     
    <!-- 비밀번호 찾기 -->
    <select 
     	id="findPw"
     	resultType="String">
     	SELECT passwd
     	FROM member
     	WHERE email = #{email}
    </select>
 </mapper>
